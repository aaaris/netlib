{"version":3,"file":"js/153.eb50e200.js","mappings":"sIAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,UAAUF,EAAG,WAAW,CAACG,YAAY,aAAaC,MAAM,CAAC,KAAOR,EAAIS,YAAY,CAACL,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,aAAa,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,cAAc,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,UAAUE,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,GAAO,MAAO,CAACV,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,OAAO,YAAc,WAAWO,MAAM,CAACC,MAAOhB,EAAc,WAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,WAAWD,GAAKE,WAAW,mBAAmB,CAACR,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACV,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,kBAAkB,OAAS,IAAIa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,eAAeT,EAAMU,OAAQV,EAAMW,iBAAiB,GAAGrB,EAAG,WAAW,CAACG,YAAY,mBAAmBC,MAAM,CAAC,KAAOR,EAAIS,YAAY,CAACL,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,UAAUE,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,GAAO,MAAO,CAACV,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,OAAO,YAAc,WAAWO,MAAM,CAACC,MAAOhB,EAAc,WAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,WAAWD,GAAKE,WAAW,mBAAmB,CAACR,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACV,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,kBAAkB,OAAS,IAAIa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,eAAeT,EAAMU,OAAQV,EAAMW,iBAAiB,IAAI,IAC5kDC,EAAkB,G,qCCmEtB,SACAC,KAAAA,aACAC,KAFA,WAGA,OAEAnB,UAAAA,GAEAU,WAAAA,KAGAU,QAVA,WAUA,wKAEA,YACA,eACA,gCACA,iBACA,2BANA,gBAEAC,EAFA,EAEAF,KAMA,mBARA,8CAUAG,QAAAA,CAEAR,eAFA,SAEAS,EAAAP,GAAA,WAEA,gCACAQ,kBAAAA,KACAC,iBAAAA,KACAC,KAAAA,YACAC,MAJA,gCAIA,sHAGA,SACAC,OAAAA,SACAC,IAAAA,4BAAAA,EAAAA,OAAAA,QAAAA,SACAV,KAAAA,CACAW,QAAAA,OAAAA,EAAAA,OAAAA,MAAAA,SAAAA,SACAC,QAAAA,EAAAA,WARA,gBAGAV,EAHA,EAGAF,KAQA,cAEA,wBAEA,YACAO,KAAAA,UACAM,QAAAA,eAIA,YACAN,KAAAA,QACAM,QAAAA,EAAAA,OAvBA,+CChGqO,I,cCQjOC,GAAY,OACd,EACA3C,EACA2B,GACA,EACA,KACA,WACA,MAIF,QAAegB,EAAiB","sources":["webpack://net-lib/./src/components/index/user/Collection.vue?caf5","webpack://net-lib/src/components/index/user/Collection.vue","webpack://net-lib/./src/components/index/user/Collection.vue?b635","webpack://net-lib/./src/components/index/user/Collection.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"我的收藏\")]),_c('el-table',{staticClass:\"tableClass\",attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"class_name\",\"align\":\"center\",\"label\":\"类型\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_name\",\"align\":\"center\",\"label\":\"名称\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_author\",\"align\":\"center\",\"label\":\"作者\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"align\":\"center\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入关键字搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-star-on\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteBookItem(scope.$index, scope.row)}}})]}}])})],1),_c('el-table',{staticClass:\"tableMobileClass\",attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"book_name\",\"align\":\"center\",\"label\":\"名称\",\"width\":\"150px\"}}),_c('el-table-column',{attrs:{\"align\":\"center\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入关键字搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-star-on\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteBookItem(scope.$index, scope.row)}}})]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>我的收藏</h1>\r\n    <el-table class=\"tableClass\" :data=\"tableData\">\r\n      <el-table-column\r\n        prop=\"class_name\"\r\n        align=\"center\"\r\n        label=\"类型\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_name\"\r\n        align=\"center\"\r\n        label=\"名称\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_author\"\r\n        align=\"center\"\r\n        label=\"作者\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column align=\"center\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <el-input\r\n            v-model=\"searchText\"\r\n            size=\"mini\"\r\n            placeholder=\"输入关键字搜索\"\r\n          />\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"deleteBookItem(scope.$index, scope.row)\"\r\n            icon=\"el-icon-star-on\"\r\n            circle\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 移动端表格 -->\r\n    <el-table class=\"tableMobileClass\" :data=\"tableData\">\r\n      <el-table-column\r\n        prop=\"book_name\"\r\n        align=\"center\"\r\n        label=\"名称\"\r\n        width=\"150px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column align=\"center\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <el-input v-model=\"searchText\" size=\"mini\" placeholder=\"输入关键字搜索\" />\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"deleteBookItem(scope.$index, scope.row)\"\r\n            icon=\"el-icon-star-on\"\r\n            circle\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Collection\",\r\n  data() {\r\n    return {\r\n      // 收藏表格数据\r\n      tableData: [],\r\n      // 搜索内容\r\n      searchText: \"\",\r\n    };\r\n  },\r\n  async created() {\r\n    // 从后端api初始化tableData\r\n    const { data: res } = await this.$http.get(\r\n      \"/collection/\" +\r\n        this.$store.state.userinfo.user_id +\r\n        \"?access_token=\" +\r\n        this.$store.getters.getToken\r\n    );\r\n    this.tableData = res.data;\r\n  },\r\n  methods: {\r\n    // 删除收藏书籍\r\n    deleteBookItem(index, row) {\r\n      // 弹窗询问\r\n      this.$confirm(\"是否取消收藏该书籍\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        // 确定按钮逻辑\r\n        // 向后台发送删除请求\r\n        const { data: res } = await this.$http({\r\n          method: \"delete\",\r\n          url: \"/collection?access_token=\" + this.$store.getters.getToken,\r\n          data: {\r\n            user_id: Number(this.$store.state.userinfo.user_id),\r\n            book_id: row.book_id,\r\n          },\r\n        });\r\n        if (res.code === 200) {\r\n          // 删除页面上表单\r\n          this.tableData.splice(index, 1);\r\n          // 删除成功提示\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"已不再收藏该书籍!\",\r\n          });\r\n        } else {\r\n          // 删除失败提示\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.data,\r\n          });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.tableClass {\r\n  width: 100%;\r\n}\r\n.tableMobileClass {\r\n  width: 100%;\r\n  display: none;\r\n}\r\n@media (max-width: 600px) {\r\n  .tableClass {\r\n    display: none;\r\n  }\r\n  .tableMobileClass {\r\n    display: block;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Collection.vue?vue&type=template&id=f2482d38&scoped=true&\"\nimport script from \"./Collection.vue?vue&type=script&lang=js&\"\nexport * from \"./Collection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Collection.vue?vue&type=style&index=0&id=f2482d38&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2482d38\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","tableData","scopedSlots","_u","key","fn","scope","model","value","callback","$$v","searchText","expression","on","$event","deleteBookItem","$index","row","staticRenderFns","name","data","created","res","methods","index","confirmButtonText","cancelButtonText","type","then","method","url","user_id","book_id","message","component"],"sourceRoot":""}