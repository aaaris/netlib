"use strict";(self["webpackChunknet_lib"]=self["webpackChunknet_lib"]||[]).push([[277],{97277:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("书本管理")]),o("el-table",{attrs:{data:e.tableData,height:"650px"}},[o("el-table-column",{attrs:{prop:"class_name",align:"center",label:"类型",width:"130px"}}),o("el-table-column",{attrs:{prop:"book_name",align:"center",label:"名称",width:"200px"}}),o("el-table-column",{attrs:{prop:"book_addr",align:"center",label:"出版社",width:"200px"}}),o("el-table-column",{attrs:{prop:"book_info",align:"center",label:"描述信息",width:"230px","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{icon:"el-icon-download",circle:""},on:{click:function(o){return e.downloadBookItem(t.$index,t.row)}}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(o){return e.editBookItem(t.$index,t.row)}}})]}}])})],1),o("el-dialog",{attrs:{title:"编辑书籍",visible:e.editDialogFormVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[o("el-form",{ref:"editDialogForm",attrs:{model:e.editDialogForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"类型",prop:"class_name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editDialogForm.class_name,callback:function(t){e.$set(e.editDialogForm,"class_name",t)},expression:"editDialogForm.class_name"}})],1),o("el-form-item",{attrs:{label:"名称",prop:"book_name"}},[o("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.editDialogForm.book_name,callback:function(t){e.$set(e.editDialogForm,"book_name",t)},expression:"editDialogForm.book_name"}})],1),o("el-form-item",{attrs:{label:"描述信息",prop:"book_info"}},[o("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.editDialogForm.book_info,callback:function(t){e.$set(e.editDialogForm,"book_info",t)},expression:"editDialogForm.book_info"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.editDialogFormSubmit}},[e._v("确 定")])],1)],1)],1)},r=[],n=o(39873);o(40561),o(83040);const i={data:function(){return{suggestionArray:[],searchText:"",tableData:[],curEditIndex:0,editDialogFormVisible:!1,editDialogForm:{}}},created:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/book");case 2:o=t.sent,a=o.data,e.tableData=a.data;case 5:case"end":return t.stop()}}),t)})))()},methods:{handleSelect:function(e){""==this.select&&(this.select="book_name"),this.searchText=e},querySearch:function(e,t){var o=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o.$http({method:"get",url:"/book/suggestion?queryKey="+(""!=o.select?o.select:"book_name")+"&queryVal="+e});case 2:r=a.sent,n=r.data,t(n.data);case 5:case"end":return a.stop()}}),a)})))()},searchBookItem:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.select){t.next=4;break}return t.abrupt("return",e.$message.error("请选择搜索类别"));case 4:if(""!==e.searchText){t.next=6;break}return t.abrupt("return",e.$message.error("请输入搜索内容"));case 6:return t.next=8,e.$http({method:"get",url:"/book?"+e.select+"="+e.searchText});case 8:o=t.sent,a=o.data,200===a.code?(e.tableData=a.data,e.$message.success("搜索成功")):e.$message.error("搜索失败");case 11:case"end":return t.stop()}}),t)})))()},downloadBookItem:function(e,t){var o=t.book_img_url;t.book_dl_count++,window.open(o,"_blank")},editBookItem:function(e,t){this.curEditIndex=e,this.editDialogFormVisible=!0,this.editDialogForm=Object.assign({},t)},editDialogFormSubmit:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http({method:"put",url:"/book/"+e.editDialogForm.book_id+"?access_token="+e.$store.getters.getToken,data:e.editDialogForm});case 2:o=t.sent,a=o.data,e.takeData.splice(e.curEditIndex,1,a.data),e.editDialogFormVisible=!1,e.$message.success("修改成功");case 7:case"end":return t.stop()}}),t)})))()}}},l=i;var s=o(1001),c=(0,s.Z)(l,a,r,!1,null,"0d97283c",null);const u=c.exports}}]);
//# sourceMappingURL=277.2b164b3a.js.map