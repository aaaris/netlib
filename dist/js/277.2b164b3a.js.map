{"version":3,"file":"js/277.2b164b3a.js","mappings":"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","sources":["webpack://net-lib/./src/components/index/manager/BookManager.vue?02eb","webpack://net-lib/src/components/index/manager/BookManager.vue","webpack://net-lib/./src/components/index/manager/BookManager.vue?a7bd","webpack://net-lib/./src/components/index/manager/BookManager.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"书本管理\")]),_c('el-table',{attrs:{\"data\":_vm.tableData,\"height\":\"650px\"}},[_c('el-table-column',{attrs:{\"prop\":\"class_name\",\"align\":\"center\",\"label\":\"类型\",\"width\":\"130px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_name\",\"align\":\"center\",\"label\":\"名称\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_addr\",\"align\":\"center\",\"label\":\"出版社\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_info\",\"align\":\"center\",\"label\":\"描述信息\",\"width\":\"230px\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-download\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.downloadBookItem(scope.$index, scope.row)}}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.editBookItem(scope.$index, scope.row)}}})]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"编辑书籍\",\"visible\":_vm.editDialogFormVisible,\"close-on-click-modal\":false,\"append-to-body\":true},on:{\"update:visible\":function($event){_vm.editDialogFormVisible=$event}}},[_c('el-form',{ref:\"editDialogForm\",attrs:{\"model\":_vm.editDialogForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"类型\",\"prop\":\"class_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.editDialogForm.class_name),callback:function ($$v) {_vm.$set(_vm.editDialogForm, \"class_name\", $$v)},expression:\"editDialogForm.class_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"book_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"readonly\":\"\"},model:{value:(_vm.editDialogForm.book_name),callback:function ($$v) {_vm.$set(_vm.editDialogForm, \"book_name\", $$v)},expression:\"editDialogForm.book_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述信息\",\"prop\":\"book_info\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(_vm.editDialogForm.book_info),callback:function ($$v) {_vm.$set(_vm.editDialogForm, \"book_info\", $$v)},expression:\"editDialogForm.book_info\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editDialogFormSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>书本管理</h1>\r\n    <!-- 书本信息表格 -->\r\n    <!-- 信息部分 -->\r\n    <el-table :data=\"tableData\" height=\"650px\">\r\n      <el-table-column\r\n        prop=\"class_name\"\r\n        align=\"center\"\r\n        label=\"类型\"\r\n        width=\"130px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_name\"\r\n        align=\"center\"\r\n        label=\"名称\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_addr\"\r\n        align=\"center\"\r\n        label=\"出版社\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_info\"\r\n        align=\"center\"\r\n        label=\"描述信息\"\r\n        width=\"230px\"\r\n        show-overflow-tooltip\r\n      >\r\n        <!-- 操作部分 -->\r\n      </el-table-column>\r\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"downloadBookItem(scope.$index, scope.row)\"\r\n            icon=\"el-icon-download\"\r\n            circle\r\n          ></el-button>\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            circle\r\n            @click=\"editBookItem(scope.$index, scope.row)\"\r\n          >\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--编辑界面-->\r\n    <el-dialog\r\n      title=\"编辑书籍\"\r\n      :visible.sync=\"editDialogFormVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      :append-to-body=\"true\"\r\n    >\r\n      <!--editDialogForm表单提交的数据-->\r\n      <el-form :model=\"editDialogForm\" label-width=\"80px\" ref=\"editDialogForm\">\r\n        <el-form-item label=\"类型\" prop=\"class_name\">\r\n          <el-input\r\n            v-model=\"editDialogForm.class_name\"\r\n            auto-complete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"名称\" prop=\"book_name\">\r\n          <el-input\r\n            v-model=\"editDialogForm.book_name\"\r\n            auto-complete=\"off\"\r\n            readonly\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述信息\" prop=\"book_info\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"editDialogForm.book_info\"\r\n            autosize\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editDialogFormSubmit\"\r\n          >确 定</el-button\r\n        >\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 查询建议\r\n      suggestionArray: [],\r\n      searchText: \"\",\r\n      // 查询排行榜表单数据\r\n      tableData: [],\r\n      //编辑界面数据\r\n      curEditIndex: 0,\r\n      editDialogFormVisible: false,\r\n      editDialogForm: {},\r\n    };\r\n  },\r\n  async created() {\r\n    // 从后端api初始化tableData\r\n    const { data: res } = await this.$http.get(\"/book\");\r\n    this.tableData = res.data;\r\n  },\r\n  methods: {\r\n    // 选择搜索建议\r\n    handleSelect(item) {\r\n      if (this.select == \"\") {\r\n        this.select = \"book_name\";\r\n      }\r\n      this.searchText = item;\r\n    },\r\n    // 获取搜索建议\r\n    async querySearch(queryString, cb) {\r\n      // console.log(str)\r\n      // 发送后台请求获取搜索建议\r\n      const { data: res } = await this.$http({\r\n        method: \"get\",\r\n        url:\r\n          \"/book/suggestion?queryKey=\" +\r\n          (this.select != \"\" ? this.select : \"book_name\") +\r\n          \"&queryVal=\" +\r\n          queryString,\r\n      });\r\n      // 调用callback返回建议的数据\r\n      cb(res.data);\r\n    },\r\n\r\n    // 寻找书本\r\n    async searchBookItem() {\r\n      if (this.select === \"\") {\r\n        return this.$message.error(\"请选择搜索类别\");\r\n      } else if (this.searchText === \"\") {\r\n        return this.$message.error(\"请输入搜索内容\");\r\n      }\r\n      const { data: res } = await this.$http({\r\n        method: \"get\",\r\n        url: \"/book\" + \"?\" + this.select + \"=\" + this.searchText,\r\n      });\r\n      if (res.code === 200) {\r\n        this.tableData = res.data;\r\n        this.$message.success(\"搜索成功\");\r\n      } else {\r\n        this.$message.error(\"搜索失败\");\r\n      }\r\n    },\r\n    // 下载书本\r\n    downloadBookItem(index, row) {\r\n      let downloadURL = row.book_img_url;\r\n      row.book_dl_count++;\r\n      window.open(downloadURL, \"_blank\");\r\n    },\r\n    // 编辑书本信息\r\n    editBookItem(index, row) {\r\n      // 获取表单信息，弹出编辑对话框\r\n      this.curEditIndex = index;\r\n      this.editDialogFormVisible = true;\r\n      this.editDialogForm = Object.assign({}, row);\r\n    },\r\n    // 编辑对话框对话表单提交\r\n    async editDialogFormSubmit() {\r\n      // 向后台提交编辑请求\r\n      const { data: res } = await this.$http({\r\n        method: \"put\",\r\n        url:\r\n          \"/book/\" +\r\n          this.editDialogForm.book_id +\r\n          \"?access_token=\" +\r\n          this.$store.getters.getToken,\r\n        data: this.editDialogForm,\r\n      });\r\n      this.takeData.splice(this.curEditIndex, 1, res.data);\r\n      this.editDialogFormVisible = false;\r\n      this.$message.success(\"修改成功\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BookManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BookManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookManager.vue?vue&type=template&id=0d97283c&scoped=true&\"\nimport script from \"./BookManager.vue?vue&type=script&lang=js&\"\nexport * from \"./BookManager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d97283c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","tableData","scopedSlots","_u","key","fn","scope","on","$event","downloadBookItem","$index","row","editBookItem","editDialogFormVisible","ref","editDialogForm","model","value","callback","$$v","$set","expression","staticClass","slot","editDialogFormSubmit","staticRenderFns","data","suggestionArray","searchText","curEditIndex","created","res","methods","handleSelect","item","querySearch","queryString","cb","method","url","searchBookItem","index","window","component"],"sourceRoot":""}