{"version":3,"file":"js/693.48a07b85.js","mappings":"sIAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,UAAUF,EAAG,WAAW,CAACG,YAAY,aAAaC,MAAM,CAAC,KAAOR,EAAIS,YAAY,CAACL,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,aAAa,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,cAAc,MAAQ,SAAS,MAAQ,KAAK,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,MAAM,MAAQ,WAAWJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,OAAO,MAAQ,QAAQ,wBAAwB,MAAMJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,SAAS,MAAQ,MAAME,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACV,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,kBAAkB,OAAS,IAAIO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIiB,eAAeH,EAAMI,OAAQJ,EAAMK,iBAAiB,IAAI,IACp+BC,EAAkB,G,qCCqDtB,SACAC,KAAAA,aACAC,KAFA,WAGA,OAEAb,UAAAA,KAGAc,QARA,WAQA,WAEA,0KACA,YACA,eACAC,OAAAA,eAAAA,QAAAA,MACA,iBACAA,OAAAA,eAAAA,QAAAA,UALA,gBACAC,EADA,EACAH,KAMA,mBAPA,gGASAI,KAEAC,QAAAA,CAEAV,eAFA,SAEAW,EAAAT,GAAA,WAEA,gCACAU,kBAAAA,KACAC,iBAAAA,KACAC,KAAAA,YACAC,MAAA,WAGA,8KACA,SACAC,OAAAA,SACAC,IACA,4BACAV,OAAAA,eAAAA,QAAAA,SACAF,KAAAA,CACAa,QAAAA,OAAAA,OAAAA,eAAAA,QAAAA,OACAC,QAAAA,EAAAA,WARA,gBACAX,EADA,EACAH,KAUA,cAEA,wBAEA,YACAS,KAAAA,UACAM,QAAAA,eAIA,YACAN,KAAAA,QACAM,QAAAA,EAAAA,OAvBA,gGA2BAC,UCjHqO,I,cCOjOC,GAAY,OACd,EACAxC,EACAqB,GACA,EACA,KACA,WACA,MAIF,QAAemB,EAAiB","sources":["webpack://net-lib/./src/components/index/user/Collection.vue?887e","webpack://net-lib/src/components/index/user/Collection.vue","webpack://net-lib/./src/components/index/user/Collection.vue?b635","webpack://net-lib/./src/components/index/user/Collection.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"我的收藏\")]),_c('el-table',{staticClass:\"tableClass\",attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"class_name\",\"align\":\"center\",\"label\":\"类型\",\"width\":\"130px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_name\",\"align\":\"center\",\"label\":\"名称\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_author\",\"align\":\"center\",\"label\":\"作者\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_addr\",\"align\":\"center\",\"label\":\"出版社\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_info\",\"align\":\"center\",\"label\":\"描述性息\",\"width\":\"230px\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-star-on\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteBookItem(scope.$index, scope.row)}}})]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>我的收藏</h1>\r\n    <el-table class=\"tableClass\" :data=\"tableData\">\r\n      <el-table-column\r\n        prop=\"class_name\"\r\n        align=\"center\"\r\n        label=\"类型\"\r\n        width=\"130px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_name\"\r\n        align=\"center\"\r\n        label=\"名称\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_author\"\r\n        align=\"center\"\r\n        label=\"作者\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_addr\"\r\n        align=\"center\"\r\n        label=\"出版社\"\r\n        width=\"200px\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"book_info\"\r\n        align=\"center\"\r\n        label=\"描述性息\"\r\n        width=\"230px\"\r\n        show-overflow-tooltip\r\n      >\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"deleteBookItem(scope.$index, scope.row)\"\r\n            icon=\"el-icon-star-on\"\r\n            circle\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Collection\",\r\n  data() {\r\n    return {\r\n      // 收藏表格数据\r\n      tableData: [],\r\n    };\r\n  },\r\n  created() {\r\n    // 从后端api初始化tableData\r\n    let getCollections = async () => {\r\n      const { data: res } = await this.$http.get(\r\n        \"/collection/\" +\r\n          window.sessionStorage.getItem(\"id\") +\r\n          \"?access_token=\" +\r\n          window.sessionStorage.getItem(\"token\")\r\n      );\r\n      this.tableData = res.data;\r\n    };\r\n    getCollections();\r\n  },\r\n  methods: {\r\n    // 删除收藏书籍\r\n    deleteBookItem(index, row) {\r\n      // 弹窗询问\r\n      this.$confirm(\"是否取消收藏该书籍\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        // 确定按钮逻辑\r\n        // 向后台发送删除请求\r\n        let delCollection = async () => {\r\n          const { data: res } = await this.$http({\r\n            method: \"delete\",\r\n            url:\r\n              \"/collection?access_token=\" +\r\n              window.sessionStorage.getItem(\"token\"),\r\n            data: {\r\n              user_id: Number(window.sessionStorage.getItem(\"id\")),\r\n              book_id: row.book_id,\r\n            },\r\n          });\r\n          if (res.code === 200) {\r\n            // 删除页面上表单\r\n            this.tableData.splice(index, 1);\r\n            // 删除成功提示\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"已不再收藏该书籍!\",\r\n            });\r\n          } else {\r\n            // 删除失败提示\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data,\r\n            });\r\n          }\r\n        };\r\n        delCollection();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Collection.vue?vue&type=template&id=b9017072&scoped=true&\"\nimport script from \"./Collection.vue?vue&type=script&lang=js&\"\nexport * from \"./Collection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9017072\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","tableData","scopedSlots","_u","key","fn","scope","on","$event","deleteBookItem","$index","row","staticRenderFns","name","data","created","window","res","getCollections","methods","index","confirmButtonText","cancelButtonText","type","then","method","url","user_id","book_id","message","delCollection","component"],"sourceRoot":""}