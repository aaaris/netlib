{"version":3,"file":"js/79.6dc506a7.js","mappings":"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","sources":["webpack://net-lib/./src/components/User.vue?68d7","webpack://net-lib/src/components/User.vue","webpack://net-lib/./src/components/User.vue?abb0","webpack://net-lib/./src/components/User.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"page-container\"},[_c('el-header',{staticClass:\"page-header\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('a',{staticClass:\"userlink\",attrs:{\"href\":\"#/home\"}},[_vm._v(\"返回\")]),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),_c('span',[_vm._v(\"个人主页\")])],1)],1)],1),_c('el-container',{staticClass:\"page-main-container\"},[_c('el-aside',{staticClass:\"user-tabs-container\"},[_c('div',{staticClass:\"user-avatar-container\"},[_c('img',{attrs:{\"src\":require(\"../assets/user/default.png\")}})]),_c('div',{staticClass:\"userItem\"},[_c('h2',[_vm._v(\"个人信息\")]),_c('span',[_vm._v(\"账号: \"+_vm._s(_vm.user.user_id))]),_c('br'),_c('span',[_vm._v(\"用户名: \"+_vm._s(_vm.user.user_name))])]),_c('br'),_c('br'),_c('br'),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.resetPwdDialogVisiable = true}}},[_vm._v(\"重设密码 \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.logout}},[_vm._v(\"注销 \")]),_c('el-dialog',{attrs:{\"title\":\"设置新密码\",\"visible\":_vm.resetPwdDialogVisiable,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.resetPwdDialogVisiable=$event}}},[_c('el-form',{ref:\"resetPwdFormRef\",staticClass:\"register_form\",attrs:{\"model\":_vm.resetPwdForm,\"rules\":_vm.resetPwdFormRules,\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user-solid\",\"placeholder\":\"username\"},model:{value:(_vm.resetPwdForm.username),callback:function ($$v) {_vm.$set(_vm.resetPwdForm, \"username\", $$v)},expression:\"resetPwdForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"password\"},model:{value:(_vm.resetPwdForm.password),callback:function ($$v) {_vm.$set(_vm.resetPwdForm, \"password\", $$v)},expression:\"resetPwdForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"checkPw\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"check password\"},model:{value:(_vm.resetPwdForm.checkPw),callback:function ($$v) {_vm.$set(_vm.resetPwdForm, \"checkPw\", $$v)},expression:\"resetPwdForm.checkPw\"}})],1),_c('el-form-item',{staticClass:\"btns\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.resetUserPwd('resetPwdFormRef')}}},[_vm._v(\"确定\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.resetResetPwdForm('resetPwdFormRef')}}},[_vm._v(\"重置\")])],1)],1)],1)],1),_c('el-main',{staticClass:\"user-main-contain\"},[_c('el-tabs',{attrs:{\"tab-position\":\"top\"}},[_c('el-tab-pane',{attrs:{\"label\":\"我的收藏\"}},[_c('el-table',{staticClass:\"tableClass\",attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"class_name\",\"align\":\"center\",\"label\":\"类型\",\"width\":\"130px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_name\",\"align\":\"center\",\"label\":\"名称\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_author\",\"align\":\"center\",\"label\":\"作者\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_addr\",\"align\":\"center\",\"label\":\"出版社\",\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"book_info\",\"align\":\"center\",\"label\":\"描述性息\",\"width\":\"230px\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-star-on\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteBookItem(scope.$index, scope.row)}}})]}}])})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"我的上传\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-upload2\"},on:{\"click\":function($event){_vm.uploadDialogVisiable = true}}}),_c('el-dialog',{attrs:{\"title\":\"上传书籍\",\"visible\":_vm.uploadDialogVisiable,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.uploadDialogVisiable=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\" 将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传jpg/png文件，且不超过500kb \")])])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-container class=\"page-container\">\r\n    <!-- 网页头部 -->\r\n    <el-header class=\"page-header\">\r\n      <el-row type=\"flex\" align=\"middle\">\r\n        <el-col :span=\"6\">\r\n          <a href=\"#/home\" class=\"userlink\">返回</a>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <span>个人主页</span>\r\n        </el-col>\r\n      </el-row>\r\n    </el-header>\r\n    <!-- 网页主体 -->\r\n    <el-container class=\"page-main-container\">\r\n      <!-- 侧边栏 -->\r\n      <el-aside class=\"user-tabs-container\">\r\n        <!-- 用户头像 -->\r\n        <div class=\"user-avatar-container\">\r\n          <img src=\"../assets/user/default.png\" />\r\n        </div>\r\n        <!-- 用户信息 -->\r\n        <div class=\"userItem\">\r\n          <h2>个人信息</h2>\r\n          <span>账号: {{ user.user_id }}</span\r\n          ><br />\r\n          <span>用户名: {{ user.user_name }}</span>\r\n        </div>\r\n        <!-- 用户设置 -->\r\n        <br /><br /><br />\r\n        <el-button type=\"primary\" plain @click=\"resetPwdDialogVisiable = true\"\r\n          >重设密码\r\n        </el-button>\r\n        <el-button type=\"danger\" plain @click=\"logout\">注销 </el-button>\r\n        <el-dialog\r\n          title=\"设置新密码\"\r\n          :visible.sync=\"resetPwdDialogVisiable\"\r\n          width=\"60%\"\r\n        >\r\n          <el-form\r\n            ref=\"resetPwdFormRef\"\r\n            :model=\"resetPwdForm\"\r\n            :rules=\"resetPwdFormRules\"\r\n            status-icon\r\n            class=\"register_form\"\r\n          >\r\n            <!-- username -->\r\n            <el-form-item prop=\"username\">\r\n              <el-input\r\n                v-model=\"resetPwdForm.username\"\r\n                prefix-icon=\"el-icon-user-solid\"\r\n                placeholder=\"username\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n            <!-- password -->\r\n            <el-form-item prop=\"password\">\r\n              <el-input\r\n                type=\"password\"\r\n                v-model=\"resetPwdForm.password\"\r\n                prefix-icon=\"el-icon-lock\"\r\n                placeholder=\"password\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n            <!-- 确认密码 -->\r\n            <el-form-item prop=\"checkPw\">\r\n              <el-input\r\n                type=\"password\"\r\n                prefix-icon=\"el-icon-lock\"\r\n                v-model=\"resetPwdForm.checkPw\"\r\n                placeholder=\"check password\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <!-- 按钮 -->\r\n            <el-form-item class=\"btns\">\r\n              <el-button type=\"primary\" @click=\"resetUserPwd('resetPwdFormRef')\"\r\n                >确定</el-button\r\n              >\r\n              <el-button\r\n                type=\"info\"\r\n                @click=\"resetResetPwdForm('resetPwdFormRef')\"\r\n                >重置</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-dialog>\r\n      </el-aside>\r\n      <!-- 用户行为主体 -->\r\n      <el-main class=\"user-main-contain\">\r\n        <el-tabs tab-position=\"top\">\r\n          <!-- 用户收藏 -->\r\n          <el-tab-pane label=\"我的收藏\">\r\n            <el-table class=\"tableClass\" :data=\"tableData\">\r\n              <el-table-column\r\n                prop=\"class_name\"\r\n                align=\"center\"\r\n                label=\"类型\"\r\n                width=\"130px\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"book_name\"\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                width=\"200px\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"book_author\"\r\n                align=\"center\"\r\n                label=\"作者\"\r\n                width=\"200px\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"book_addr\"\r\n                align=\"center\"\r\n                label=\"出版社\"\r\n                width=\"200px\"\r\n              >\r\n              </el-table-column>\r\n              <!-- <el-table-column prop=\"book_dl_count\" align=\"center\" label=\"下载量\" width=\"130px\">\r\n              </el-table-column> -->\r\n              <el-table-column\r\n                prop=\"book_info\"\r\n                align=\"center\"\r\n                label=\"描述性息\"\r\n                width=\"230px\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n              <el-table-column align=\"center\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    @click=\"deleteBookItem(scope.$index, scope.row)\"\r\n                    icon=\"el-icon-star-on\"\r\n                    circle\r\n                  ></el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <!-- 用户上传书籍 -->\r\n          </el-tab-pane>\r\n          <!-- 用户上传 -->\r\n          <el-tab-pane label=\"我的上传\">\r\n            <el-button\r\n              icon=\"el-icon-upload2\"\r\n              @click=\"uploadDialogVisiable = true\"\r\n            >\r\n            </el-button>\r\n            <!-- 上传弹窗 -->\r\n            <el-dialog\r\n              title=\"上传书籍\"\r\n              :visible.sync=\"uploadDialogVisiable\"\r\n              width=\"60%\"\r\n            >\r\n              <el-upload\r\n                class=\"upload-demo\"\r\n                drag\r\n                action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                multiple\r\n              >\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">\r\n                  将文件拖到此处，或<em>点击上传</em>\r\n                </div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">\r\n                  只能上传jpg/png文件，且不超过500kb\r\n                </div>\r\n              </el-upload>\r\n            </el-dialog>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    //   验证输入用户名\r\n    var validateUserName = (rule, value, callback) => {\r\n      // if (value === \"\") {\r\n      //   callback(new Error(\"请输入用户名\"));\r\n      // } else {\r\n      callback();\r\n      // }\r\n    };\r\n    // 验证输入密码\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入新密码\"));\r\n      } else if (value.length < 6 || value.length > 15) {\r\n        callback(new Error(\"长度在6到15个字符\"));\r\n      } else {\r\n        if (this.registerForm.checkPw !== \"\") {\r\n          this.$refs.registerFormRef.validateField(\"checkPw\");\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    // 验证再次输入的密码\r\n    var validatePass2 = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请再次输入密码\"));\r\n      } else if (value !== this.registerForm.password) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else if (value.length < 6 || value.length > 15) {\r\n        callback(new Error(\"长度在6到15个字符\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      // 用户信息对象\r\n      user: {},\r\n      // 重置密码表单\r\n      resetPwdForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        checkPw: \"\",\r\n      },\r\n      //   规则验证对象\r\n      resetPwdFormRules: {\r\n        username: [{ validator: validateUserName, trigger: \"blur\" }],\r\n        password: [{ validator: validatePass, trigger: \"blur\" }],\r\n        checkPw: [{ validator: validatePass2, trigger: \"blur\" }],\r\n      },\r\n      // 收藏表格数据\r\n      tableData: [],\r\n      // 上传窗口\r\n      uploadDialogVisiable: false,\r\n      // 设置窗口\r\n      resetPwdDialogVisiable: false,\r\n    };\r\n  },\r\n  created() {\r\n    let getUser = async () => {\r\n      const { data: res } = await this.$http.get(\r\n        \"/user/\" +\r\n          window.sessionStorage.getItem(\"id\") +\r\n          \"?access_token=\" +\r\n          window.sessionStorage.getItem(\"token\")\r\n      );\r\n      this.user = res.data;\r\n      // console.log(this.user)\r\n    };\r\n    getUser();\r\n    // 从后端api初始化tableData\r\n    let getCollections = async () => {\r\n      const { data: res } = await this.$http.get(\r\n        \"/collection/\" +\r\n          window.sessionStorage.getItem(\"id\") +\r\n          \"?access_token=\" +\r\n          window.sessionStorage.getItem(\"token\")\r\n      );\r\n      this.tableData = res.data;\r\n    };\r\n    getCollections();\r\n  },\r\n  methods: {\r\n    // 返回主页\r\n    goBack() {\r\n      this.$router.push(\"/home\");\r\n    },\r\n    // 注销\r\n    logout() {\r\n      this.$confirm(\"亲，您确定要退出登录吗？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        window.sessionStorage.removeItem(\"id\");\r\n        window.sessionStorage.removeItem(\"token\");\r\n        // console.log(window.sessionStorage.length)\r\n        this.goBack();\r\n      });\r\n    },\r\n    // 重新设置密码\r\n    resetUserPwd(formName) {\r\n      this.$refs[formName].validate(async (valid) => {\r\n        if (!valid) return;\r\n        // const { data: res } = await this.$http({\r\n        //   method: \"post\",\r\n        //   url:\r\n        //     \"/user\",\r\n        //   data: {\r\n        //     user_name: this.resetPwdForm.username,\r\n        //     user_password: this.resetPwdForm.password\r\n        //   }\r\n        // });\r\n        // console.log(res)\r\n        // this.$message({\r\n        //   showClose: true,\r\n        //   duration: 0,\r\n        //   type: \"success\",\r\n        //   message: \"修改成功！请重新登录\"\r\n        // });\r\n        // this.$router.push(\"/login\");\r\n      });\r\n    },\r\n    // 重置密码表单\r\n    resetResetPwdForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n\r\n    // 删除收藏书籍\r\n    deleteBookItem(index, row) {\r\n      // 弹窗询问\r\n      this.$confirm(\"是否取消收藏该书籍\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        // 确定按钮逻辑\r\n        // 向后台发送删除请求\r\n        let delCollection = async () => {\r\n          const { data: res } = await this.$http({\r\n            method: \"delete\",\r\n            url:\r\n              \"/collection?access_token=\" +\r\n              window.sessionStorage.getItem(\"token\"),\r\n            data: {\r\n              user_id: this.user.user_id,\r\n              book_id: row.book_id,\r\n            },\r\n          });\r\n          if (res.code === 200) {\r\n            // 删除页面上表单\r\n            this.tableData.splice(index, 1);\r\n            // 删除成功提示\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"已不再收藏该书籍!\",\r\n            });\r\n          } else {\r\n            // 删除失败提示\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.data,\r\n            });\r\n          }\r\n        };\r\n        delCollection();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n//页头容器\r\n.page-header {\r\n  font-size: 18px;\r\n  line-height: 20px;\r\n  background-color: rgb(71, 70, 70);\r\n  color: #f7f7f7;\r\n  box-shadow: 0 4px 14px 0 rgb(0 0 0 / 5%);\r\n  // 行垂直居中\r\n  .el-row {\r\n    height: 100%;\r\n  }\r\n  // 超链接\r\n  .userlink {\r\n    color: #f2f2f2;\r\n    text-decoration: none;\r\n  }\r\n  .userlink:hover {\r\n    color: #49afd0;\r\n    text-decoration: underline;\r\n  }\r\n}\r\n\r\n// 网页主体容器\r\n.page-main-container {\r\n  margin: 50px;\r\n  height: 1000px;\r\n  background-color: white;\r\n}\r\n\r\n// 侧边标签栏\r\n.user-tabs-container {\r\n  width: 300px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 14px 0 rgb(0 0 0 / 5%);\r\n  // 头像容器\r\n  .user-avatar-container {\r\n    margin: 50px auto;\r\n  }\r\n\r\n  // 个人信息\r\n  .userItem {\r\n    font-size: 20px;\r\n  }\r\n\r\n  // 收藏部分容器\r\n  .page-main-contain {\r\n    width: 800px;\r\n  }\r\n}\r\n\r\n// 用户主体区域容器\r\n.user-main-contain {\r\n  box-shadow: 0 4px 14px 0 rgb(0 0 0 / 5%);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=79745c74&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=79745c74&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79745c74\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","user","user_id","user_name","on","$event","resetPwdDialogVisiable","logout","ref","resetPwdForm","resetPwdFormRules","model","value","callback","$$v","$set","expression","resetUserPwd","resetResetPwdForm","tableData","scopedSlots","_u","key","fn","scope","deleteBookItem","$index","row","uploadDialogVisiable","slot","staticRenderFns","data","username","password","checkPw","validator","trigger","created","window","res","getUser","getCollections","methods","goBack","confirmButtonText","cancelButtonText","type","then","formName","valid","index","method","url","book_id","message","delCollection","component"],"sourceRoot":""}