{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array-buffer.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.typed-array.uint8-array.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.copy-within.js\";\nimport \"core-js/modules/es.typed-array.every.js\";\nimport \"core-js/modules/es.typed-array.fill.js\";\nimport \"core-js/modules/es.typed-array.filter.js\";\nimport \"core-js/modules/es.typed-array.find.js\";\nimport \"core-js/modules/es.typed-array.find-index.js\";\nimport \"core-js/modules/es.typed-array.for-each.js\";\nimport \"core-js/modules/es.typed-array.includes.js\";\nimport \"core-js/modules/es.typed-array.index-of.js\";\nimport \"core-js/modules/es.typed-array.iterator.js\";\nimport \"core-js/modules/es.typed-array.join.js\";\nimport \"core-js/modules/es.typed-array.last-index-of.js\";\nimport \"core-js/modules/es.typed-array.map.js\";\nimport \"core-js/modules/es.typed-array.reduce.js\";\nimport \"core-js/modules/es.typed-array.reduce-right.js\";\nimport \"core-js/modules/es.typed-array.reverse.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/es.typed-array.slice.js\";\nimport \"core-js/modules/es.typed-array.some.js\";\nimport \"core-js/modules/es.typed-array.sort.js\";\nimport \"core-js/modules/es.typed-array.subarray.js\";\nimport \"core-js/modules/es.typed-array.to-locale-string.js\";\nimport \"core-js/modules/es.typed-array.to-string.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { decode } from \"@webassemblyjs/wasm-parser\";\nimport { traverse } from \"@webassemblyjs/ast\";\nimport { cloneNode } from \"@webassemblyjs/ast/lib/clone\";\nimport { shrinkPaddedLEB128 } from \"@webassemblyjs/wasm-opt\";\nimport { getSectionForNode } from \"@webassemblyjs/helper-wasm-bytecode\";\nimport constants from \"@webassemblyjs/helper-wasm-bytecode\";\nimport { applyOperations } from \"./apply\";\n\nfunction hashNode(node) {\n  return JSON.stringify(node);\n}\n\nfunction preprocess(ab) {\n  var optBin = shrinkPaddedLEB128(new Uint8Array(ab));\n  return optBin.buffer;\n}\n\nfunction sortBySectionOrder(nodes) {\n  var originalOrder = new Map();\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _node = _step.value;\n      originalOrder.set(_node, originalOrder.size);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  nodes.sort(function (a, b) {\n    var sectionA = getSectionForNode(a);\n    var sectionB = getSectionForNode(b);\n    var aId = constants.sections[sectionA];\n    var bId = constants.sections[sectionB];\n\n    if (typeof aId !== \"number\" || typeof bId !== \"number\") {\n      throw new Error(\"Section id not found\");\n    }\n\n    if (aId === bId) {\n      // $FlowIgnore originalOrder is filled for all nodes\n      return originalOrder.get(a) - originalOrder.get(b);\n    }\n\n    return aId - bId;\n  });\n}\n\nexport function edit(ab, visitors) {\n  ab = preprocess(ab);\n  var ast = decode(ab);\n  return editWithAST(ast, ab, visitors);\n}\nexport function editWithAST(ast, ab, visitors) {\n  var operations = [];\n  var uint8Buffer = new Uint8Array(ab);\n  var nodeBefore;\n\n  function before(type, path) {\n    nodeBefore = cloneNode(path.node);\n  }\n\n  function after(type, path) {\n    if (path.node._deleted === true) {\n      operations.push({\n        kind: \"delete\",\n        node: path.node\n      }); // $FlowIgnore\n    } else if (hashNode(nodeBefore) !== hashNode(path.node)) {\n      operations.push({\n        kind: \"update\",\n        oldNode: nodeBefore,\n        node: path.node\n      });\n    }\n  }\n\n  traverse(ast, visitors, before, after);\n  uint8Buffer = applyOperations(ast, uint8Buffer, operations);\n  return uint8Buffer.buffer;\n}\nexport function add(ab, newNodes) {\n  ab = preprocess(ab);\n  var ast = decode(ab);\n  return addWithAST(ast, ab, newNodes);\n}\nexport function addWithAST(ast, ab, newNodes) {\n  // Sort nodes by insertion order\n  sortBySectionOrder(newNodes);\n  var uint8Buffer = new Uint8Array(ab); // Map node into operations\n\n  var operations = newNodes.map(function (n) {\n    return {\n      kind: \"add\",\n      node: n\n    };\n  });\n  uint8Buffer = applyOperations(ast, uint8Buffer, operations);\n  return uint8Buffer.buffer;\n}","map":{"version":3,"names":["decode","traverse","cloneNode","shrinkPaddedLEB128","getSectionForNode","constants","applyOperations","hashNode","node","JSON","stringify","preprocess","ab","optBin","Uint8Array","buffer","sortBySectionOrder","nodes","originalOrder","Map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","_node","value","set","size","err","sort","a","b","sectionA","sectionB","aId","sections","bId","Error","get","edit","visitors","ast","editWithAST","operations","uint8Buffer","nodeBefore","before","type","path","after","_deleted","push","kind","oldNode","add","newNodes","addWithAST","map","n"],"sources":["D:/Work/Project/LMS/lms/node_modules/@webassemblyjs/wasm-edit/esm/index.js"],"sourcesContent":["import { decode } from \"@webassemblyjs/wasm-parser\";\nimport { traverse } from \"@webassemblyjs/ast\";\nimport { cloneNode } from \"@webassemblyjs/ast/lib/clone\";\nimport { shrinkPaddedLEB128 } from \"@webassemblyjs/wasm-opt\";\nimport { getSectionForNode } from \"@webassemblyjs/helper-wasm-bytecode\";\nimport constants from \"@webassemblyjs/helper-wasm-bytecode\";\nimport { applyOperations } from \"./apply\";\n\nfunction hashNode(node) {\n  return JSON.stringify(node);\n}\n\nfunction preprocess(ab) {\n  var optBin = shrinkPaddedLEB128(new Uint8Array(ab));\n  return optBin.buffer;\n}\n\nfunction sortBySectionOrder(nodes) {\n  var originalOrder = new Map();\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _node = _step.value;\n      originalOrder.set(_node, originalOrder.size);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  nodes.sort(function (a, b) {\n    var sectionA = getSectionForNode(a);\n    var sectionB = getSectionForNode(b);\n    var aId = constants.sections[sectionA];\n    var bId = constants.sections[sectionB];\n\n    if (typeof aId !== \"number\" || typeof bId !== \"number\") {\n      throw new Error(\"Section id not found\");\n    }\n\n    if (aId === bId) {\n      // $FlowIgnore originalOrder is filled for all nodes\n      return originalOrder.get(a) - originalOrder.get(b);\n    }\n\n    return aId - bId;\n  });\n}\n\nexport function edit(ab, visitors) {\n  ab = preprocess(ab);\n  var ast = decode(ab);\n  return editWithAST(ast, ab, visitors);\n}\nexport function editWithAST(ast, ab, visitors) {\n  var operations = [];\n  var uint8Buffer = new Uint8Array(ab);\n  var nodeBefore;\n\n  function before(type, path) {\n    nodeBefore = cloneNode(path.node);\n  }\n\n  function after(type, path) {\n    if (path.node._deleted === true) {\n      operations.push({\n        kind: \"delete\",\n        node: path.node\n      }); // $FlowIgnore\n    } else if (hashNode(nodeBefore) !== hashNode(path.node)) {\n      operations.push({\n        kind: \"update\",\n        oldNode: nodeBefore,\n        node: path.node\n      });\n    }\n  }\n\n  traverse(ast, visitors, before, after);\n  uint8Buffer = applyOperations(ast, uint8Buffer, operations);\n  return uint8Buffer.buffer;\n}\nexport function add(ab, newNodes) {\n  ab = preprocess(ab);\n  var ast = decode(ab);\n  return addWithAST(ast, ab, newNodes);\n}\nexport function addWithAST(ast, ab, newNodes) {\n  // Sort nodes by insertion order\n  sortBySectionOrder(newNodes);\n  var uint8Buffer = new Uint8Array(ab); // Map node into operations\n\n  var operations = newNodes.map(function (n) {\n    return {\n      kind: \"add\",\n      node: n\n    };\n  });\n  uint8Buffer = applyOperations(ast, uint8Buffer, operations);\n  return uint8Buffer.buffer;\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAT,QAAuB,4BAAvB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,SAASC,kBAAT,QAAmC,yBAAnC;AACA,SAASC,iBAAT,QAAkC,qCAAlC;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,SAASC,eAAT,QAAgC,SAAhC;;AAEA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;EACtB,OAAOC,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,EAApB,EAAwB;EACtB,IAAIC,MAAM,GAAGV,kBAAkB,CAAC,IAAIW,UAAJ,CAAeF,EAAf,CAAD,CAA/B;EACA,OAAOC,MAAM,CAACE,MAAd;AACD;;AAED,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;EACjC,IAAIC,aAAa,GAAG,IAAIC,GAAJ,EAApB;EACA,IAAIC,yBAAyB,GAAG,IAAhC;EACA,IAAIC,iBAAiB,GAAG,KAAxB;EACA,IAAIC,cAAc,GAAGC,SAArB;;EAEA,IAAI;IACF,KAAK,IAAIC,SAAS,GAAGP,KAAK,CAACQ,MAAM,CAACC,QAAR,CAAL,EAAhB,EAA0CC,KAA/C,EAAsD,EAAEP,yBAAyB,GAAG,CAACO,KAAK,GAAGH,SAAS,CAACI,IAAV,EAAT,EAA2BC,IAAzD,CAAtD,EAAsHT,yBAAyB,GAAG,IAAlJ,EAAwJ;MACtJ,IAAIU,KAAK,GAAGH,KAAK,CAACI,KAAlB;MACAb,aAAa,CAACc,GAAd,CAAkBF,KAAlB,EAAyBZ,aAAa,CAACe,IAAvC;IACD;EACF,CALD,CAKE,OAAOC,GAAP,EAAY;IACZb,iBAAiB,GAAG,IAApB;IACAC,cAAc,GAAGY,GAAjB;EACD,CARD,SAQU;IACR,IAAI;MACF,IAAI,CAACd,yBAAD,IAA8BI,SAAS,UAAT,IAAoB,IAAtD,EAA4D;QAC1DA,SAAS,UAAT;MACD;IACF,CAJD,SAIU;MACR,IAAIH,iBAAJ,EAAuB;QACrB,MAAMC,cAAN;MACD;IACF;EACF;;EAEDL,KAAK,CAACkB,IAAN,CAAW,UAAUC,CAAV,EAAaC,CAAb,EAAgB;IACzB,IAAIC,QAAQ,GAAGlC,iBAAiB,CAACgC,CAAD,CAAhC;IACA,IAAIG,QAAQ,GAAGnC,iBAAiB,CAACiC,CAAD,CAAhC;IACA,IAAIG,GAAG,GAAGnC,SAAS,CAACoC,QAAV,CAAmBH,QAAnB,CAAV;IACA,IAAII,GAAG,GAAGrC,SAAS,CAACoC,QAAV,CAAmBF,QAAnB,CAAV;;IAEA,IAAI,OAAOC,GAAP,KAAe,QAAf,IAA2B,OAAOE,GAAP,KAAe,QAA9C,EAAwD;MACtD,MAAM,IAAIC,KAAJ,CAAU,sBAAV,CAAN;IACD;;IAED,IAAIH,GAAG,KAAKE,GAAZ,EAAiB;MACf;MACA,OAAOxB,aAAa,CAAC0B,GAAd,CAAkBR,CAAlB,IAAuBlB,aAAa,CAAC0B,GAAd,CAAkBP,CAAlB,CAA9B;IACD;;IAED,OAAOG,GAAG,GAAGE,GAAb;EACD,CAhBD;AAiBD;;AAED,OAAO,SAASG,IAAT,CAAcjC,EAAd,EAAkBkC,QAAlB,EAA4B;EACjClC,EAAE,GAAGD,UAAU,CAACC,EAAD,CAAf;EACA,IAAImC,GAAG,GAAG/C,MAAM,CAACY,EAAD,CAAhB;EACA,OAAOoC,WAAW,CAACD,GAAD,EAAMnC,EAAN,EAAUkC,QAAV,CAAlB;AACD;AACD,OAAO,SAASE,WAAT,CAAqBD,GAArB,EAA0BnC,EAA1B,EAA8BkC,QAA9B,EAAwC;EAC7C,IAAIG,UAAU,GAAG,EAAjB;EACA,IAAIC,WAAW,GAAG,IAAIpC,UAAJ,CAAeF,EAAf,CAAlB;EACA,IAAIuC,UAAJ;;EAEA,SAASC,MAAT,CAAgBC,IAAhB,EAAsBC,IAAtB,EAA4B;IAC1BH,UAAU,GAAGjD,SAAS,CAACoD,IAAI,CAAC9C,IAAN,CAAtB;EACD;;EAED,SAAS+C,KAAT,CAAeF,IAAf,EAAqBC,IAArB,EAA2B;IACzB,IAAIA,IAAI,CAAC9C,IAAL,CAAUgD,QAAV,KAAuB,IAA3B,EAAiC;MAC/BP,UAAU,CAACQ,IAAX,CAAgB;QACdC,IAAI,EAAE,QADQ;QAEdlD,IAAI,EAAE8C,IAAI,CAAC9C;MAFG,CAAhB,EAD+B,CAI3B;IACL,CALD,MAKO,IAAID,QAAQ,CAAC4C,UAAD,CAAR,KAAyB5C,QAAQ,CAAC+C,IAAI,CAAC9C,IAAN,CAArC,EAAkD;MACvDyC,UAAU,CAACQ,IAAX,CAAgB;QACdC,IAAI,EAAE,QADQ;QAEdC,OAAO,EAAER,UAFK;QAGd3C,IAAI,EAAE8C,IAAI,CAAC9C;MAHG,CAAhB;IAKD;EACF;;EAEDP,QAAQ,CAAC8C,GAAD,EAAMD,QAAN,EAAgBM,MAAhB,EAAwBG,KAAxB,CAAR;EACAL,WAAW,GAAG5C,eAAe,CAACyC,GAAD,EAAMG,WAAN,EAAmBD,UAAnB,CAA7B;EACA,OAAOC,WAAW,CAACnC,MAAnB;AACD;AACD,OAAO,SAAS6C,GAAT,CAAahD,EAAb,EAAiBiD,QAAjB,EAA2B;EAChCjD,EAAE,GAAGD,UAAU,CAACC,EAAD,CAAf;EACA,IAAImC,GAAG,GAAG/C,MAAM,CAACY,EAAD,CAAhB;EACA,OAAOkD,UAAU,CAACf,GAAD,EAAMnC,EAAN,EAAUiD,QAAV,CAAjB;AACD;AACD,OAAO,SAASC,UAAT,CAAoBf,GAApB,EAAyBnC,EAAzB,EAA6BiD,QAA7B,EAAuC;EAC5C;EACA7C,kBAAkB,CAAC6C,QAAD,CAAlB;EACA,IAAIX,WAAW,GAAG,IAAIpC,UAAJ,CAAeF,EAAf,CAAlB,CAH4C,CAGN;;EAEtC,IAAIqC,UAAU,GAAGY,QAAQ,CAACE,GAAT,CAAa,UAAUC,CAAV,EAAa;IACzC,OAAO;MACLN,IAAI,EAAE,KADD;MAELlD,IAAI,EAAEwD;IAFD,CAAP;EAID,CALgB,CAAjB;EAMAd,WAAW,GAAG5C,eAAe,CAACyC,GAAD,EAAMG,WAAN,EAAmBD,UAAnB,CAA7B;EACA,OAAOC,WAAW,CAACnC,MAAnB;AACD"},"metadata":{},"sourceType":"module"}