{"ast":null,"code":"import _asyncToGenerator from \"D:/Work/Project/LMS/lms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nVue.use(Vuex); // 定义会话状态\n\nvar state = {\n  // access_token\n  token: \"\",\n  // 用户信息\n  userinfo: {// user_id: 0,\n    // user_name: \"aris\",\n    // user_level: 0,\n  },\n  // 菜单导航\n  menu_data: [],\n  //  加载动态路由标志\n  isLoadRoute: false\n}; // 定义行为方法\n\nvar mutations = {\n  // 设置授权密钥\n  setToken: function setToken(state, token) {\n    var _this = this;\n\n    state.token = token; // 更新userinfo\n\n    var getUser = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$_this$$http$ge, res;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.$http.get(\"/user/\" + window.sessionStorage.getItem(\"id\") + \"?access_token=\" + token);\n\n              case 2:\n                _yield$_this$$http$ge = _context.sent;\n                res = _yield$_this$$http$ge.data;\n                _this.user = res.data; // console.log(this.user)\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getUser() {\n        return _ref.apply(this, arguments);\n      };\n    }(); // getUser();\n\n  },\n  // 设置用户信息\n  setUserInfo: function setUserInfo(state, data) {\n    state.userinfo = JSON.parse(data);\n  },\n  //  设置菜单导航\n  setMeunData: function setMeunData(state, data) {\n    state.menu_data = data;\n  },\n  //   设置加载路由标志\n  setLoadRoute: function setLoadRoute(state, data) {\n    state.isLoadRoute = data;\n  },\n  //   清空会话状态\n  clearState: function clearState(state) {\n    state = {\n      token: \"\",\n      userinfo: {\n        user_id: 0,\n        user_name: \"\",\n        user_level: 0\n      },\n      menu_data: [],\n      isLoadRoute: false\n    };\n  }\n}; // 定义获取加工方法\n\nvar getters = {\n  // 获取用户登录信息\n  getLoginState: function getLoginState(state) {\n    return state.token != \"\";\n  },\n  // 获取用户角色\n  getUserLevel: function getUserLevel(state) {\n    var data;\n\n    if (state.userState == 0) {\n      data = \"用户\";\n    } else {\n      data = state.userState + \"管理员\";\n    }\n\n    return data;\n  },\n  //   获取用户授权密钥\n  getToken: function getToken(state) {\n    return state.token;\n  }\n};\nexport default new Vuex.Store({\n  state: state,\n  mutations: mutations,\n  getters: getters\n});","map":{"version":3,"names":["Vue","Vuex","use","state","token","userinfo","menu_data","isLoadRoute","mutations","setToken","getUser","$http","get","window","sessionStorage","getItem","res","data","user","setUserInfo","JSON","parse","setMeunData","setLoadRoute","clearState","user_id","user_name","user_level","getters","getLoginState","getUserLevel","userState","getToken","Store"],"sources":["D:/Work/Project/LMS/lms/src/store/store.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\n\r\nVue.use(Vuex);\r\n\r\n// 定义会话状态\r\nconst state = {\r\n  // access_token\r\n  token: \"\",\r\n  // 用户信息\r\n  userinfo: {\r\n    // user_id: 0,\r\n    // user_name: \"aris\",\r\n    // user_level: 0,\r\n  },\r\n  // 菜单导航\r\n  menu_data: [],\r\n  //  加载动态路由标志\r\n  isLoadRoute: false,\r\n};\r\n\r\n// 定义行为方法\r\nconst mutations = {\r\n  // 设置授权密钥\r\n  setToken(state, token) {\r\n    state.token = token;\r\n    // 更新userinfo\r\n    let getUser = async () => {\r\n      const { data: res } = await this.$http.get(\r\n        \"/user/\" +\r\n          window.sessionStorage.getItem(\"id\") +\r\n          \"?access_token=\" +\r\n          token\r\n      );\r\n      this.user = res.data;\r\n      // console.log(this.user)\r\n    };\r\n    // getUser();\r\n  },\r\n  // 设置用户信息\r\n  setUserInfo(state, data) {\r\n    state.userinfo = JSON.parse(data);\r\n  },\r\n  //  设置菜单导航\r\n  setMeunData(state, data) {\r\n    state.menu_data = data;\r\n  },\r\n  //   设置加载路由标志\r\n  setLoadRoute(state, data) {\r\n    state.isLoadRoute = data;\r\n  },\r\n  //   清空会话状态\r\n  clearState(state) {\r\n    state = {\r\n      token: \"\",\r\n      userinfo: {\r\n        user_id: 0,\r\n        user_name: \"\",\r\n        user_level: 0,\r\n      },\r\n      menu_data: [],\r\n      isLoadRoute: false,\r\n    };\r\n  },\r\n};\r\n\r\n// 定义获取加工方法\r\nconst getters = {\r\n  // 获取用户登录信息\r\n  getLoginState(state) {\r\n    return state.token != \"\";\r\n  },\r\n  // 获取用户角色\r\n  getUserLevel(state) {\r\n    let data;\r\n    if (state.userState == 0) {\r\n      data = \"用户\";\r\n    } else {\r\n      data = state.userState + \"管理员\";\r\n    }\r\n    return data;\r\n  },\r\n  //   获取用户授权密钥\r\n  getToken(state) {\r\n    return state.token;\r\n  },\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state,\r\n  mutations,\r\n  getters,\r\n});\r\n"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEAD,GAAG,CAACE,GAAJ,CAAQD,IAAR,E,CAEA;;AACA,IAAME,KAAK,GAAG;EACZ;EACAC,KAAK,EAAE,EAFK;EAGZ;EACAC,QAAQ,EAAE,CACR;IACA;IACA;EAHQ,CAJE;EASZ;EACAC,SAAS,EAAE,EAVC;EAWZ;EACAC,WAAW,EAAE;AAZD,CAAd,C,CAeA;;AACA,IAAMC,SAAS,GAAG;EAChB;EACAC,QAFgB,oBAEPN,KAFO,EAEAC,KAFA,EAEO;IAAA;;IACrBD,KAAK,CAACC,KAAN,GAAcA,KAAd,CADqB,CAErB;;IACA,IAAIM,OAAO;MAAA,mEAAG;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACgB,KAAI,CAACC,KAAL,CAAWC,GAAX,CAC1B,WACEC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,IAA9B,CADF,GAEE,gBAFF,GAGEX,KAJwB,CADhB;;cAAA;gBAAA;gBACEY,GADF,yBACJC,IADI;gBAOZ,KAAI,CAACC,IAAL,GAAYF,GAAG,CAACC,IAAhB,CAPY,CAQZ;;cARY;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAH;;MAAA,gBAAPP,OAAO;QAAA;MAAA;IAAA,GAAX,CAHqB,CAarB;;EACD,CAhBe;EAiBhB;EACAS,WAlBgB,uBAkBJhB,KAlBI,EAkBGc,IAlBH,EAkBS;IACvBd,KAAK,CAACE,QAAN,GAAiBe,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAjB;EACD,CApBe;EAqBhB;EACAK,WAtBgB,uBAsBJnB,KAtBI,EAsBGc,IAtBH,EAsBS;IACvBd,KAAK,CAACG,SAAN,GAAkBW,IAAlB;EACD,CAxBe;EAyBhB;EACAM,YA1BgB,wBA0BHpB,KA1BG,EA0BIc,IA1BJ,EA0BU;IACxBd,KAAK,CAACI,WAAN,GAAoBU,IAApB;EACD,CA5Be;EA6BhB;EACAO,UA9BgB,sBA8BLrB,KA9BK,EA8BE;IAChBA,KAAK,GAAG;MACNC,KAAK,EAAE,EADD;MAENC,QAAQ,EAAE;QACRoB,OAAO,EAAE,CADD;QAERC,SAAS,EAAE,EAFH;QAGRC,UAAU,EAAE;MAHJ,CAFJ;MAONrB,SAAS,EAAE,EAPL;MAQNC,WAAW,EAAE;IARP,CAAR;EAUD;AAzCe,CAAlB,C,CA4CA;;AACA,IAAMqB,OAAO,GAAG;EACd;EACAC,aAFc,yBAEA1B,KAFA,EAEO;IACnB,OAAOA,KAAK,CAACC,KAAN,IAAe,EAAtB;EACD,CAJa;EAKd;EACA0B,YANc,wBAMD3B,KANC,EAMM;IAClB,IAAIc,IAAJ;;IACA,IAAId,KAAK,CAAC4B,SAAN,IAAmB,CAAvB,EAA0B;MACxBd,IAAI,GAAG,IAAP;IACD,CAFD,MAEO;MACLA,IAAI,GAAGd,KAAK,CAAC4B,SAAN,GAAkB,KAAzB;IACD;;IACD,OAAOd,IAAP;EACD,CAda;EAed;EACAe,QAhBc,oBAgBL7B,KAhBK,EAgBE;IACd,OAAOA,KAAK,CAACC,KAAb;EACD;AAlBa,CAAhB;AAqBA,eAAe,IAAIH,IAAI,CAACgC,KAAT,CAAe;EAC5B9B,KAAK,EAALA,KAD4B;EAE5BK,SAAS,EAATA,SAF4B;EAG5BoB,OAAO,EAAPA;AAH4B,CAAf,CAAf"},"metadata":{},"sourceType":"module"}