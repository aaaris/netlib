{"ast":null,"code":"import Vue from \"vue\";\nimport Vuex from \"vuex\";\nVue.use(Vuex); // 定义会话状态\n// 便于刷新页面后重新从localStorage中获取值\n\nvar state = {\n  isLogin: localStorage.getItem(\"isLogin\") ? localStorage.getItem(\"isLogin\") : 0,\n  // user\n  userinfo: localStorage.getItem(\"userinfo\") ? JSON.parse(localStorage.getItem(\"userinfo\")) : null,\n  // token\n  token: localStorage.getItem(\"token\") ? localStorage.getItem(\"token\") : \"\",\n  // token\n  // 菜单导航\n  menu_data: [],\n  //  加载动态路由标志\n  isLoadRoute: false\n}; // 定义行为方法\n\nvar mutations = {\n  //  设置菜单导航\n  setMeunData: function setMeunData(state, data) {\n    state.menu_data = data;\n  },\n  //   设置加载路由标志\n  setLoadRoute: function setLoadRoute(state, data) {\n    state.isLoadRoute = data;\n  },\n  setToken: function setToken(state, value) {\n    // 设置存储token\n    state.token = value;\n    localStorage.setItem(\"token\", value);\n    localStorage.setItem(\"isLogin\", 1);\n    state.isLogin = 1;\n  },\n  setUserInfo: function setUserInfo(state, value) {\n    // 设置存储token\n    state.userinfo = JSON.parse(value);\n    localStorage.setItem(\"userinfo\", value);\n  },\n  removeStorage: function removeStorage(state) {\n    // 删除token\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"isLogin\");\n    localStorage.removeItem(\"userinfo\");\n    state.isLogin = 0;\n  }\n}; // 定义获取加工方法\n\nvar getters = {\n  // 监听数据变化的\n  getToken: function getToken(state) {\n    // 获取本地存储的登录信息\n    if (!state.token) {\n      state.token = localStorage.getItem(\"token\");\n    }\n\n    return state.token;\n  },\n  getUserId: function getUserId(state) {\n    // 获取用户id\n    if (!state.userinfo) {\n      state.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\n    }\n\n    return state.userinfo.user_id;\n  },\n  getUserLevel: function getUserLevel(state) {\n    // 获取用户权限\n    if (!state.userinfo) {\n      state.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\n    }\n\n    return state.userinfo ? state.userinfo.user_level : 0;\n  }\n};\nexport default new Vuex.Store({\n  state: state,\n  mutations: mutations,\n  getters: getters\n});","map":{"version":3,"names":["Vue","Vuex","use","state","isLogin","localStorage","getItem","userinfo","JSON","parse","token","menu_data","isLoadRoute","mutations","setMeunData","data","setLoadRoute","setToken","value","setItem","setUserInfo","removeStorage","removeItem","getters","getToken","getUserId","user_id","getUserLevel","user_level","Store"],"sources":["D:/Work/Project/LMS/lms/src/store/store.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\n\r\nVue.use(Vuex);\r\n\r\n// 定义会话状态\r\n// 便于刷新页面后重新从localStorage中获取值\r\nconst state = {\r\n  isLogin: localStorage.getItem(\"isLogin\")\r\n    ? localStorage.getItem(\"isLogin\")\r\n    : 0,\r\n  // user\r\n  userinfo: localStorage.getItem(\"userinfo\")\r\n    ? JSON.parse(localStorage.getItem(\"userinfo\"))\r\n    : null,\r\n  // token\r\n  token: localStorage.getItem(\"token\") ? localStorage.getItem(\"token\") : \"\", // token\r\n  // 菜单导航\r\n  menu_data: [],\r\n  //  加载动态路由标志\r\n  isLoadRoute: false, \r\n};\r\n\r\n// 定义行为方法\r\nconst mutations = {\r\n  //  设置菜单导航\r\n  setMeunData(state, data) {\r\n    state.menu_data = data;\r\n  },\r\n  //   设置加载路由标志\r\n  setLoadRoute(state, data) {\r\n    state.isLoadRoute = data;\r\n  },\r\n  setToken(state, value) {\r\n    // 设置存储token\r\n    state.token = value;\r\n    localStorage.setItem(\"token\", value);\r\n    localStorage.setItem(\"isLogin\", 1);\r\n    state.isLogin = 1;\r\n  },\r\n  setUserInfo(state, value) {\r\n    // 设置存储token\r\n    state.userinfo = JSON.parse(value);\r\n    localStorage.setItem(\"userinfo\", value);\r\n  },\r\n  removeStorage(state) {\r\n    // 删除token\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"isLogin\");\r\n    localStorage.removeItem(\"userinfo\");\r\n    state.isLogin = 0;\r\n  },\r\n};\r\n\r\n// 定义获取加工方法\r\nconst getters = {\r\n  // 监听数据变化的\r\n  getToken(state) {\r\n    // 获取本地存储的登录信息\r\n    if (!state.token) {\r\n      state.token = localStorage.getItem(\"token\");\r\n    }\r\n    return state.token;\r\n  },\r\n  getUserId(state) {\r\n    // 获取用户id\r\n    if (!state.userinfo) {\r\n      state.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\r\n    }\r\n    return state.userinfo.user_id;\r\n  },\r\n  getUserLevel(state) {\r\n    // 获取用户权限\r\n    if (!state.userinfo) {\r\n      state.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\r\n    } \r\n    return state.userinfo ? state.userinfo.user_level : 0;\r\n  },\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state,\r\n  mutations,\r\n  getters,\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}