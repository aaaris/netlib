{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nrequire(\"core-js/modules/es.error.to-string.js\");\n\nrequire(\"core-js/modules/es.array.some.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nvar util = require('./_util');\n\nmodule.exports = function defFunc(ajv) {\n  if (!ajv._opts.$data) {\n    console.warn('keyword select requires $data option');\n    return ajv;\n  }\n\n  var metaSchemaRef = util.metaSchemaRef(ajv);\n  var compiledCaseSchemas = [];\n  defFunc.definition = {\n    validate: function v(schema, data, parentSchema) {\n      if (parentSchema.selectCases === undefined) throw new Error('keyword \"selectCases\" is absent');\n      var compiled = getCompiledSchemas(parentSchema, false);\n      var validate = compiled.cases[schema];\n      if (validate === undefined) validate = compiled[\"default\"];\n      if (typeof validate == 'boolean') return validate;\n      var valid = validate(data);\n      if (!valid) v.errors = validate.errors;\n      return valid;\n    },\n    $data: true,\n    metaSchema: {\n      type: ['string', 'number', 'boolean', 'null']\n    }\n  };\n  ajv.addKeyword('select', defFunc.definition);\n  ajv.addKeyword('selectCases', {\n    compile: function compile(schemas, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n\n      for (var value in schemas) {\n        compiled.cases[value] = compileOrBoolean(schemas[value]);\n      }\n\n      return function () {\n        return true;\n      };\n    },\n    valid: true,\n    metaSchema: {\n      type: 'object',\n      additionalProperties: metaSchemaRef\n    }\n  });\n  ajv.addKeyword('selectDefault', {\n    compile: function compile(schema, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      compiled[\"default\"] = compileOrBoolean(schema);\n      return function () {\n        return true;\n      };\n    },\n    valid: true,\n    metaSchema: metaSchemaRef\n  });\n  return ajv;\n\n  function getCompiledSchemas(parentSchema, create) {\n    var compiled;\n    compiledCaseSchemas.some(function (c) {\n      if (c.parentSchema === parentSchema) {\n        compiled = c;\n        return true;\n      }\n    });\n\n    if (!compiled && create !== false) {\n      compiled = {\n        parentSchema: parentSchema,\n        cases: {},\n        \"default\": true\n      };\n      compiledCaseSchemas.push(compiled);\n    }\n\n    return compiled;\n  }\n\n  function compileOrBoolean(schema) {\n    return typeof schema == 'boolean' ? schema : ajv.compile(schema);\n  }\n};","map":{"version":3,"names":["util","require","module","exports","defFunc","ajv","_opts","$data","console","warn","metaSchemaRef","compiledCaseSchemas","definition","validate","v","schema","data","parentSchema","selectCases","undefined","Error","compiled","getCompiledSchemas","cases","valid","errors","metaSchema","type","addKeyword","compile","schemas","value","compileOrBoolean","additionalProperties","create","some","c","push"],"sources":["D:/Work/Project/LMS/lms/node_modules/ajv-keywords/keywords/select.js"],"sourcesContent":["'use strict';\n\nvar util = require('./_util');\n\nmodule.exports = function defFunc(ajv) {\n  if (!ajv._opts.$data) {\n    console.warn('keyword select requires $data option');\n    return ajv;\n  }\n  var metaSchemaRef = util.metaSchemaRef(ajv);\n  var compiledCaseSchemas = [];\n\n  defFunc.definition = {\n    validate: function v(schema, data, parentSchema) {\n      if (parentSchema.selectCases === undefined)\n        throw new Error('keyword \"selectCases\" is absent');\n      var compiled = getCompiledSchemas(parentSchema, false);\n      var validate = compiled.cases[schema];\n      if (validate === undefined) validate = compiled.default;\n      if (typeof validate == 'boolean') return validate;\n      var valid = validate(data);\n      if (!valid) v.errors = validate.errors;\n      return valid;\n    },\n    $data: true,\n    metaSchema: { type: ['string', 'number', 'boolean', 'null'] }\n  };\n\n  ajv.addKeyword('select', defFunc.definition);\n  ajv.addKeyword('selectCases', {\n    compile: function (schemas, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      for (var value in schemas)\n        compiled.cases[value] = compileOrBoolean(schemas[value]);\n      return function() { return true; };\n    },\n    valid: true,\n    metaSchema: {\n      type: 'object',\n      additionalProperties: metaSchemaRef\n    }\n  });\n  ajv.addKeyword('selectDefault', {\n    compile: function (schema, parentSchema) {\n      var compiled = getCompiledSchemas(parentSchema);\n      compiled.default = compileOrBoolean(schema);\n      return function() { return true; };\n    },\n    valid: true,\n    metaSchema: metaSchemaRef\n  });\n  return ajv;\n\n\n  function getCompiledSchemas(parentSchema, create) {\n    var compiled;\n    compiledCaseSchemas.some(function (c) {\n      if (c.parentSchema === parentSchema) {\n        compiled = c;\n        return true;\n      }\n    });\n    if (!compiled && create !== false) {\n      compiled = {\n        parentSchema: parentSchema,\n        cases: {},\n        default: true\n      };\n      compiledCaseSchemas.push(compiled);\n    }\n    return compiled;\n  }\n\n  function compileOrBoolean(schema) {\n    return typeof schema == 'boolean'\n            ? schema\n            : ajv.compile(schema);\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}